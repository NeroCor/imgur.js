!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("superagent-bluebird-promise")):"function"==typeof define&&define.amd?define(["superagent-bluebird-promise"],r):t.imgur=r(t.request)}(this,function(t){"use strict";function r(){var t,r,i,e={};for(i=0;i<=arguments.length;i++){r=arguments[i];for(t in r)r.hasOwnProperty(t)&&(e[t]=r[t])}return e}function i(t,r){return a({path:"gallery/"+r,apiUrl:e.API_URL+"/"+e.API_VERSION,get:function(r,i,n){var a=arguments.length<=3||void 0===arguments[3]?t:arguments[3],s=this.path+"/"+r+"/"+i+"/"+a+"/"+n,o=e.buildOptions(this.apiUrl,s,"get");return this.imgurAPICall(o)},post:p})}var e={API_URL:"https://api.imgur.com",API_VERSION:"3",CLIENT_ID:"",buildOptions:function(t,r,i){var e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return{apiUrl:t,path:r,method:i,body:e}},bearer:"",additionalHeaders:{}},n=function(r){["method","apiUrl","path","body"].forEach(function(t){if(!r[t])throw new Error(t+" must be specified")});var i="Client-ID "+e.CLIENT_ID;return e.bearer&&(i="Bearer "+e.bearer),t[r.method](r.apiUrl+"/"+r.path).send(r.body).set("Authorization",i).set(e.additionalHeaders).promise()},a=function(t){return t.imgurAPICall=n.bind(t),t.apiUrl=t.apiUrl||e.API_URL+"/"+e.API_VERSION,t},s=a({path:"image",apiUrl:e.API_URL+"/"+e.API_VERSION,get:function(t){var r=e.buildOptions(this.apiUrl,this.path+"/"+t,"get");return this.imgurAPICall(r)}}),o=a({path:"album",apiUrl:e.API_URL+"/"+e.API_VERSION,get:function(t){var r=e.buildOptions(this.apiUrl,this.path+"/"+t,"get");return this.imgurAPICall(r)}}),u=a({path:"oauth2",apiUrl:e.API_URL,get:function(t){var r=t||"token",i="?"+["response_type="+r,"client_id="+e.CLIENT_ID].join("&"),n=this.path+"/authorize"+i,a=e.buildOptions(this.apiUrl,n,"get");return this.imgurAPICall(a)},refresh:function(t,r){var i="?"+["refresh_token="+t,"client_id="+e.CLIENT_ID,"client_secret="+r,"grant_type=refresh_token"].join("&"),n=this.path+"/token"+i,a=e.buildOptions(this.apiUrl,n,"post");return this.imgurAPICall(a)}}),l=a({path:"topics",apiUrl:e.API_URL+"/"+e.API_VERSION,get:function(t){var r=arguments.length<=1||void 0===arguments[1]?"viral":arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=this.path+"/"+t+"/"+r+"/"+i,a=e.buildOptions(this.apiUrl,n,"get");return this.imgurAPICall(a)},getDefaults:function(){var t=this.path+"/defaults",r=e.buildOptions(this.apiUrl,t,"get");return this.imgurAPICall(r)}}),h={path:"gallery",apiUrl:e.API_URL+"/"+e.API_VERSION},p=a(r({},h,{REASON_DOES_NOT_BELONG_ON_IMGUR:1,get:function(t){var r=this.path+"/"+t,i=e.buildOptions(this.apiUrl,r,"get");return this.imgurAPICall(i)},report:function(t){var r=arguments.length<=1||void 0===arguments[1]?this.REASON_DOES_NOT_BELONG_ON_IMGUR:arguments[1];if(!t)throw new Error("hash must be specified");if("number"!=typeof r)throw new Error("the reason must be an integer");var i=this.path+"/"+t+"/report",n=e.buildOptions(this.apiUrl,i,"post",{reason:r});return this.imgurAPICall(n)},_handleVote:function(t,r){if(!t)throw new Error("hash must be specified");var i=this.path+"/"+t+"/vote/"+r,n=e.buildOptions(this.apiUrl,i,"post");return this.imgurAPICall(n)},upvote:function(t){return this._handleVote(t,"up")},downvote:function(t){return this._handleVote(t,"down")},favorite:function(t,r){if(!t)throw new Error("hash must be specified");if(void 0===r||"boolean"!=typeof r)throw new Error("isAlbum with type boolean must be specified");var i=r?"album":"image",n=i+"/"+t+"/favorite",a=e.buildOptions(this.apiUrl,n,"post");return this.imgurAPICall(a)},comments:a(r({},h,{get:function(t){var r=arguments.length<=1||void 0===arguments[1]?"best":arguments[1],i=this.path+"/"+t+"/comments/"+r,n=e.buildOptions(this.apiUrl,i,"get");return this.imgurAPICall(n)}}))})),m=a({path:"gallery",apiUrl:e.API_URL+"/"+e.API_VERSION,get:function(){var t=arguments.length<=0||void 0===arguments[0]?"hot":arguments[0],r=arguments.length<=1||void 0===arguments[1]?"viral":arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],a=this.path+"/"+t+"/"+r+"/"+i+"?showViral="+n,s=e.buildOptions(this.apiUrl,a,"get");return this.imgurAPICall(s)},post:p}),g="week",d="all",f=i(g,"r"),c=i(g,"t"),I=i(d,"search"),b=i(d,"topic"),_=a({path:"comment",apiUrl:e.API_URL+"/"+e.API_VERSION,REASON_DOES_NOT_BELONG_ON_IMGUR:1,get:function(t){if(!t)throw new Error("commentId must be specified");var r=this.path+"/"+t,i=e.buildOptions(this.apiUrl,r,"get");return this.imgurAPICall(i)},downvote:function(t){if(!t)throw new Error("commentId must be specified");var r=this.path+"/"+t+"/vote/down",i=e.buildOptions(this.apiUrl,r,"post");return this.imgurAPICall(i)},upvote:function(t){if(!t)throw new Error("commentId must be specified");var r=this.path+"/"+t+"/vote/up",i=e.buildOptions(this.apiUrl,r,"post");return this.imgurAPICall(i)},report:function(t){var r=arguments.length<=1||void 0===arguments[1]?this.REASON_DOES_NOT_BELONG_ON_IMGUR:arguments[1];if(!t)throw new Error("commentId must be specified");if("number"!=typeof r)throw new Error("the reason must be an integer");var i=this.path+"/"+t+"/report",n=e.buildOptions(this.apiUrl,i,"post",{reason:r});return this.imgurAPICall(n)},deleteComment:function(t){if(!t)throw new Error("commentId must be specified");var r=this.path+"/"+t,i=e.buildOptions(this.apiUrl,r,"del");return this.imgurAPICall(i)},submitComment:function(t){["image_id","comment"].forEach(function(r){if(console.log(!t[r]),!t[r])throw new Error(r+" must be specified")});var r=e.buildOptions(this.apiUrl,this.path,"post",t);return this.imgurAPICall(r)},submitReply:function(t){["image_id","comment","parent_id"].forEach(function(r){if(!t[r])throw new Error(r+" must be specified")});var r=e.buildOptions(this.apiUrl,this.path,"post",t);return this.imgurAPICall(r)}}),O=function(t,r){var i=function(t,r){e[t]=r},a=function(t){return e[t]};if(!t)throw new Error("Client Key required to initialize imgur client");return i("CLIENT_ID",t),r&&i("bearer",r),{imgurAPICall:n,CLIENT_ID:t,image:s,album:o,oauth2:u,topics:l,gallery:m,subreddit:f,tag:c,search:I,topic:b,comment:_,setUtil:i,getUtil:a}};return O});
//# sourceMappingURL=imgur.min.js.map
