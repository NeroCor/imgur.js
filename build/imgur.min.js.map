{"version":3,"sources":["/source/imgur.js","imgur.min.js"],"names":["global","factory","exports","module","require","define","amd","imgur","request","_","this","utils","API_URL","API_VERSION","CLIENT_ID","buildOptions","apiUrl","path","method","body","undefined","arguments","bearer","imgurAPICall","options","forEach","option","Error","authToken","send","set","promise","endpoint","bind","imageEndpoint","get","hash","oauth2Endpoint","responseType","resType","queryString","join","refresh","refreshToken","clientSecret","topicsEndpoint","topicId","sort","page","requestPath","getDefaults","postOptions","galleryPostEndpoint","extend","REASON_DOES_NOT_BELONG_ON_IMGUR","report","reason","_handleVote","voteType","upvote","downvote","favorite","isAlbum","postType","comments","galleryEndpoint","section","showViral","post","commentEndpoint","commentId","deleteComment","submitComment","params","console","log","submitReply","clientKey","bearerKey","setUtil","key","value","getUtil","image","oauth2","topics","gallery","comment"],"mappings":"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","file":"imgur.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('superagent-bluebird-promise'), require('lodash')) :\n    typeof define === 'function' && define.amd ? define(['superagent-bluebird-promise', 'lodash'], factory) :\n    global.imgur = factory(global.request, global._)\n}(this, function (request, _) { 'use strict';\n\n    var utils = {\n        API_URL: 'https://api.imgur.com',\n        API_VERSION: '3',\n        CLIENT_ID: '',\n        buildOptions: (apiUrl, path, method, body = {}) => {\n            return { apiUrl, path, method, body };\n        },\n        bearer: ''\n    };\n\n    var imgurAPICall = function(options) {\n        ['method', 'apiUrl', 'path', 'body'].forEach(option => {\n            if (!options[option]) {\n                throw new Error(`${option} must be specified`);\n            }\n        });\n\n        let authToken = `Client-ID ${utils.CLIENT_ID}`;\n\n        if(utils.bearer) {\n            authToken = `Bearer ${utils.bearer}`;\n        }\n\n        return request[options.method](`${options.apiUrl}/${options.path}`)\n            .send(options.body)\n            .set('Authorization', authToken)\n            .promise();\n    };\n\n    var endpoint = function(options) {\n        options.imgurAPICall = _.bind(imgurAPICall, options);\n        options.apiUrl = options.apiUrl || `${utils.API_URL}/${utils.API_VERSION}`;\n\n        return options;\n    }\n\n    var imageEndpoint = endpoint({\n        path: 'image',\n        apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n        get(hash) {\n            const options = utils.buildOptions(this.apiUrl, `${this.path}/${hash}`, 'get');\n\n            return this.imgurAPICall(options);\n        }\n    });\n\n    var oauth2Endpoint = endpoint({\n        path: 'oauth2',\n        apiUrl: utils.API_URL,\n        get(responseType) {\n            const resType = responseType || 'token';\n            const queryString = '?' + [\n                `response_type=${resType}`,\n                `client_id=${utils.CLIENT_ID}`\n        ].join('&');\n\n            const path = `${this.path}/authorize${queryString}`;\n            const options = utils.buildOptions(this.apiUrl, path, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        refresh(refreshToken, clientSecret) {\n            const queryString = '?' + [\n                `refresh_token=${refreshToken}`,\n                `client_id=${utils.CLIENT_ID}`,\n                `client_secret=${clientSecret}`,\n                'grant_type=refresh_token'\n            ].join('&');\n\n            const path = `${this.path}/token${queryString}`;\n            const options = utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        }\n    });\n\n    var topicsEndpoint = endpoint({\n        path: 'topics',\n        apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n        get(topicId, sort='viral', page=0) {\n            const requestPath = `${this.path}/${topicId}/${sort}/${page}`;\n            const options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        getDefaults() {\n            const requestPath = `${this.path}/defaults`;\n            const options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n            return this.imgurAPICall(options);\n        }\n    });\n\n    const postOptions = {\n        path: 'gallery',\n        apiUrl: `${utils.API_URL}/${utils.API_VERSION}`\n};\n\n    var galleryPostEndpoint = endpoint(_.extend({}, postOptions, {\n        REASON_DOES_NOT_BELONG_ON_IMGUR: 1,\n        get(hash) {\n            const path = `${this.path}/${hash}`;\n            const options = utils.buildOptions(this.apiUrl, path, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        report(hash, reason = this.REASON_DOES_NOT_BELONG_ON_IMGUR) {\n            if(!hash) { throw new Error('hash must be specified'); }\n\n            if(typeof reason !== 'number') {\n                throw new Error('the reason must be an integer');\n            }\n\n            const path = `${this.path}/${hash}/report`;\n            const options = utils.buildOptions(this.apiUrl, path, 'post', { reason });\n\n            return this.imgurAPICall(options);\n        },\n        _handleVote(hash, voteType) {\n            if(!hash) { throw new Error('hash must be specified'); }\n\n            const path = `${this.path}/${hash}/vote/${voteType}`;\n            const options = utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        },\n        upvote(hash) {\n            this._handleVote(hash, 'up');\n        },\n        downvote(hash) {\n            this._handleVote(hash, 'down');\n        },\n        favorite(hash, isAlbum) {\n            if(!hash) { throw new Error('hash must be specified'); }\n\n            if(isAlbum === undefined || typeof(isAlbum) !== 'boolean') {\n                throw new Error('isAlbum with type boolean must be specified');\n            }\n\n            const postType = isAlbum ? 'album' : 'image';\n            //doesn't use gallery path because it could be a non gallery item\n            const path = `${postType}/${hash}/favorite`;\n            const options =  utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        },\n        comments: endpoint(_.extend({}, postOptions, {\n            get(hash, sort='best') {\n                const path = `${this.path}/${hash}/comments/${sort}`;\n                const options = utils.buildOptions(this.apiUrl, path, 'get');\n\n                return this.imgurAPICall(options);\n            }\n        }))\n    }));\n\n    var galleryEndpoint = endpoint({\n        path: 'gallery',\n        apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n        get(section='hot', sort='viral', page=0, showViral=true) {\n            const requestPath = `${this.path}/${section}/${sort}/${page}?showViral=${showViral}`;\n            const options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        post: galleryPostEndpoint\n    });\n\n    var commentEndpoint = endpoint({\n        path: 'comment',\n        apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n        REASON_DOES_NOT_BELONG_ON_IMGUR: 1,\n        get(commentId) {\n            if(!commentId) { throw new Error('commentId must be specified'); }\n\n            const path = `${this.path}/${commentId}`;\n            const options = utils.buildOptions(this.apiUrl, path, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        downvote(commentId) {\n            if(!commentId) { throw new Error('commentId must be specified'); }\n\n            const path = `${this.path}/${commentId}/vote/down`;\n            const options = utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        },\n        upvote(commentId) {\n            if(!commentId) { throw new Error('commentId must be specified'); }\n\n            const path = `${this.path}/${commentId}/vote/up`;\n            const options = utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        },\n        report(commentId, reason = this.REASON_DOES_NOT_BELONG_ON_IMGUR) {\n            if(!commentId) { throw new Error('commentId must be specified'); }\n\n            if(typeof reason !== 'number') {\n                throw new Error('the reason must be an integer');\n            }\n\n            const path = `${this.path}/${commentId}/report`;\n            const options = utils.buildOptions(this.apiUrl, path, 'post', { reason });\n\n            return this.imgurAPICall(options);\n        },\n        deleteComment(commentId) {\n            if(!commentId) { throw new Error('commentId must be specified'); }\n\n            const path = `${this.path}/${commentId}`;\n            const options = utils.buildOptions(this.apiUrl, path, 'delete');\n\n            return this.imgurAPICall(options);\n        },\n        submitComment(params) {\n            ['image_id', 'comment'].forEach(option => {\n                console.log(!params[option]);\n                if (!params[option]) {\n                    throw new Error(`${option} must be specified`);\n                }\n            });\n\n            const options = utils.buildOptions(this.apiUrl, this.path, 'post', params);\n            return this.imgurAPICall(options);\n        },\n        submitReply(params) {\n            ['image_id', 'comment', 'parent_id'].forEach(option => {\n                if (!params[option]) {\n                    throw new Error(`${option} must be specified`);\n                }\n            });\n\n            const options = utils.buildOptions(this.apiUrl, this.path, 'post', params);\n            return this.imgurAPICall(options);\n        }\n    });\n\n    var imgur = function(clientKey, bearerKey) {\n        let setUtil = function(key, value) {\n            utils[key] = value;\n        };\n\n        let getUtil = function(key) {\n            return utils[key];\n        };\n\n        if (!clientKey) {\n            throw new Error('Client Key required to initialize imgur client');\n        }\n\n        setUtil('CLIENT_ID', clientKey);\n\n        if(bearerKey) {\n            setUtil('bearer', bearerKey);\n        }\n\n        return {\n            imgurAPICall,\n            CLIENT_ID: clientKey,\n            image: imageEndpoint,\n            oauth2: oauth2Endpoint,\n            topics: topicsEndpoint,\n            gallery: galleryEndpoint,\n            comment: commentEndpoint,\n            setUtil,\n            getUtil\n        };\n    }\n\n    return imgur;\n\n}));\n",null],"sourceRoot":"/source/"}